{
  "description": "完整的节点配置数据示例 - 用于演示数据库格式",
  "example": {
    "node": {
      "id": 1,
      "name": "relay-node-beijing",
      "description": "北京中继节点",
      "address": "192.168.1.100",
      "display_address": "beijing.relay.example.com",
      "token": "550e8400-e29b-41d4-a716-446655440000",
      "level": 1,
      "is_public": true,
      "version": "1.0.0",
      "upload_traffic": 1073741824,
      "download_traffic": 2147483648,
      "traffic_limit": 107374182400,
      "enlarge_scale": 1,
      "ports": "10000-20000",
      "custom_cfg": null,
      "owner_id": 1,
      "created_at": "2024-01-01T00:00:00Z",
      "updated_at": "2024-01-15T10:30:00Z"
    },
    "rules": [
      {
        "id": 1,
        "name": "HTTP代理规则",
        "description": "HTTP流量转发",
        "listen_port": 8080,
        "tunnel_id": 1,
        "targets": "target.example.com:80",
        "status": "running",
        "limit": "{\"traffic\":{\"service_in\":10485760,\"service_out\":20971520,\"conn_in\":1048576,\"conn_out\":2097152,\"ips\":[{\"ip\":\"192.168.1.50\",\"in\":524288,\"out\":1048576}]},\"request\":{\"service_rate\":100,\"ips\":[{\"ip\":\"192.168.1.50\",\"rate\":10}]},\"connection\":{\"service_limit\":1000,\"ips\":[{\"ip\":\"192.168.1.50\",\"limit\":50}]}}",
        "upload_traffic": 536870912,
        "download_traffic": 1073741824,
        "owner_id": 1,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      },
      {
        "id": 2,
        "name": "HTTPS代理规则",
        "description": "HTTPS流量转发",
        "listen_port": 8443,
        "tunnel_id": 2,
        "targets": "secure.example.com:443",
        "status": "running",
        "limit": "{}",
        "upload_traffic": 268435456,
        "download_traffic": 536870912,
        "owner_id": 1,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      }
    ],
    "tunnels": [
      {
        "id": 1,
        "name": "HTTP隧道",
        "description": "两跳HTTP隧道",
        "used_traffic": 1610612736,
        "ingress_addr": "entry.example.com:80",
        "owner_id": 1,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      },
      {
        "id": 2,
        "name": "TLS隧道",
        "description": "三跳TLS加密隧道",
        "used_traffic": 805306368,
        "ingress_addr": "",
        "owner_id": 1,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      }
    ],
    "chains": [
      {
        "id": 1,
        "tunnel_id": 1,
        "node_id": 1,
        "chain_type": 0,
        "transport": "raw",
        "index": 0,
        "strategy": "round",
        "port": 10001,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      },
      {
        "id": 2,
        "tunnel_id": 1,
        "node_id": 2,
        "chain_type": 2,
        "transport": "raw",
        "index": 1,
        "port": 0,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      },
      {
        "id": 3,
        "tunnel_id": 2,
        "node_id": 1,
        "chain_type": 0,
        "transport": "tls",
        "index": 0,
        "strategy": "round",
        "port": 10443,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      },
      {
        "id": 4,
        "tunnel_id": 2,
        "node_id": 3,
        "chain_type": 1,
        "transport": "grpc",
        "index": 1,
        "strategy": "round",
        "port": 0,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      },
      {
        "id": 5,
        "tunnel_id": 2,
        "node_id": 4,
        "chain_type": 2,
        "transport": "wss",
        "index": 2,
        "port": 0,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:30:00Z"
      }
    ],
    "tls": {
      "commonName": "relay.example.com",
      "organization": "ExampleOrg"
    }
  },
  "notes": {
    "chain_type": {
      "0": "IN - 入口节点",
      "1": "CHAIN - 中间节点",
      "2": "OUT - 出口节点"
    },
    "transport": {
      "raw": "直传 (无加密)",
      "tls": "TLS加密",
      "mtls": "双向TLS",
      "grpc": "gRPC",
      "wss": "WebSocket Secure",
      "mwss": "Multiplexed WebSocket Secure"
    },
    "status": {
      "created": "创建中",
      "paused": "暂停",
      "running": "运行中",
      "error": "错误"
    },
    "limit_format": "JSON字符串，包含 traffic, request, connection 三种限制器配置"
  },
  "generated_gost_config_preview": {
    "services": [
      {
        "name": "service-1",
        "addr": ":8080",
        "handler": {
          "type": "tcp",
          "chain": "chain-1"
        },
        "listener": {
          "type": "tcp"
        },
        "forwarder": {
          "nodes": [
            {
              "name": "target-1",
              "addr": "target.example.com:80"
            }
          ]
        },
        "limiter": "limiter-service-1",
        "rlimiter": "rlimiter-service-1",
        "climiter": "climiter-service-1"
      },
      {
        "name": "service-2",
        "addr": ":8443",
        "handler": {
          "type": "auto",
          "chain": "chain-2"
        },
        "listener": {
          "type": "tcp"
        }
      }
    ],
    "chains": [
      {
        "name": "chain-1",
        "hops": [
          {
            "name": "hop-1-0",
            "nodes": [
              {
                "name": "node-1-t1",
                "addr": "192.168.1.100:10001",
                "connector": {
                  "type": "relay"
                },
                "dialer": {
                  "type": "tcp"
                }
              }
            ]
          }
        ]
      },
      {
        "name": "chain-2",
        "selector": {
          "strategy": "round",
          "maxFails": 1,
          "failTimeout": 30
        },
        "hops": [
          {
            "name": "hop-2-0",
            "nodes": [
              {
                "name": "node-1-t2",
                "addr": "192.168.1.100:10443",
                "connector": {
                  "type": "forward"
                },
                "dialer": {
                  "type": "tls"
                }
              }
            ]
          },
          {
            "name": "hop-2-1",
            "nodes": [
              {
                "name": "node-3-t2",
                "addr": "192.168.1.102:auto-allocated",
                "connector": {
                  "type": "relay"
                },
                "dialer": {
                  "type": "grpc"
                }
              }
            ]
          },
          {
            "name": "hop-2-2",
            "nodes": [
              {
                "name": "node-4-t2",
                "addr": "192.168.1.103:auto-allocated",
                "connector": {
                  "type": "forward"
                },
                "dialer": {
                  "type": "ws"
                }
              }
            ]
          }
        ]
      }
    ],
    "limiters": [
      {
        "name": "limiter-service-1",
        "limits": [
          "$ 10485760 20971520"
        ]
      },
      {
        "name": "limiter-conn-1",
        "limits": [
          "$$ 1048576 2097152"
        ]
      },
      {
        "name": "limiter-ip-1-0",
        "limits": [
          "192.168.1.50 524288 1048576"
        ]
      }
    ],
    "rlimiters": [
      {
        "name": "rlimiter-service-1",
        "limits": [
          "$ 100"
        ]
      },
      {
        "name": "rlimiter-ip-1-0",
        "limits": [
          "192.168.1.50 10"
        ]
      }
    ],
    "climiters": [
      {
        "name": "climiter-service-1",
        "limits": [
          "$ 1000"
        ]
      },
      {
        "name": "climiter-ip-1-0",
        "limits": [
          "192.168.1.50 50"
        ]
      }
    ],
    "tls": {
      "validity": "8760h",
      "commonName": "relay.example.com",
      "organization": "ExampleOrg"
    }
  }
}
